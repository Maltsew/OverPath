{% extends "layout/base.html" %}
{% load static %}


{% block title %}
<title>Создание записи</title>
{% endblock title %}
{% block header %}
{% endblock header %}
{% block content %}
<section class="section wb">
    <div class="container">
        <div class="row">
            <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12">
                <div class="page-wrapper">
                    <div class="custombox clearfix">
                        <h4 class="small-title">Создание поста</h4>
                        <div class="row">
                            <div class="col-lg-12">
                                <!-- обработчик ошибок полей формы -->
                                {% if form.errors %}
                                    {% for field in form %}
                                        {% for error in field.errors %}
                                        <div class="alert alert-danger">
                                            <strong>{{ error }}</strong>
                                        </div>
                                        {% endfor %}
                                    {% endfor %}
                                <!-- обработчик ошибок формы -->
                                    {% for error in field.non_field_errors %}
                                    <div class="alert alert-danger">
                                        <strong>{{ error }}</strong>
                                    </div>
                                    {% endfor %}
                                {% endif %}
                                <form class="form-wrapper" action="{% url 'add_post' %}" method="post" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <div><p><h2><strong>Что вы хотите рассказать?</strong></h2></p></div>
                                    <!-- Описание пунктов блога -->
                                    {% for f in form %}
                                        <!--<input type="text" class="form-control" placeholder="{{ f.label }}">-->
                                        <p><h3><strong><label class="form-inline" for="{{ f.id_for_label }}">{{f.label}}: </label></strong></h3>{{ f }}</p>
                                    {% endfor %}
                                    <button type="submit" class="btn btn-primary">Опубликовать</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div><!-- end page-wrapper -->
            </div><!-- end col -->
            {% include 'blog/sidebar.html' %}
        </div><!-- end col -->
    </div><!-- end row -->
    </div><!-- end container -->
</section>
<section>
  <h1>Todos</h1>

  <hr><br><br>

  <div class="row">
    <div class="col">
      <div class="header">
        <h2>GET</h2>
      </div>
      <button id="getTodos">Read</button>
      <p><ul id="todoList"></ul></p>
    </div>
  </div>
</section>
{% endblock content %}
{% block javascript %}
<script>
  // fetch api examples
  (function() {

    console.log("ready!");

    const allTodosUrl = "{% url 'todos' %}";

     // GET all todos
    const readButton = document.getElementById("getTodos");
    readButton.addEventListener("click", () => {
      getAllTodos(allTodosUrl);
    });
})();
</script>
{% endblock %}
